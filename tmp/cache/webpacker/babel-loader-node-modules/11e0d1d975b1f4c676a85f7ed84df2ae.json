{"ast":null,"code":"var _jsxFileName = \"/home/deepa/Documents/AptanaSpace3/rails5-reactjs-webpack-sample/app/javascript/components/Post.js\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport React from 'react';\n\nvar Post =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Post, _React$Component);\n\n  function Post(props) {\n    var _this;\n\n    _classCallCheck(this, Post);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Post).call(this, props));\n    _this.handleDeleteRecord = _this.handleDeleteRecord.bind(_assertThisInitialized(_this));\n    _this.handleToggle = _this.handleToggle.bind(_assertThisInitialized(_this));\n    _this.handleUpdate = _this.handleUpdate.bind(_assertThisInitialized(_this));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.getCategory = _this.getCategory.bind(_assertThisInitialized(_this));\n    _this.state = {\n      edit: false,\n      category_id: ''\n    };\n    return _this;\n  }\n\n  _createClass(Post, [{\n    key: \"getCategory\",\n    value: function getCategory(category_id) {\n      var cname = this.props.categories.map(function (cat) {\n        return cat.id.toString() === category_id.toString() ? cat.name : '';\n      });\n      return cname;\n    }\n  }, {\n    key: \"handleUpdate\",\n    value: function handleUpdate(e) {\n      e.preventDefault();\n      var post_data = {\n        name: this.recordValue(\"name\"),\n        description: this.recordValue(\"description\"),\n        title: this.recordValue(\"title\"),\n        author: this.recordValue(\"author\"),\n        category_id: document.getElementById(\"category_id\").value\n      };\n      var self = this;\n      $.ajax({\n        method: 'PUT',\n        url: '/posts/' + self.props.post.id,\n        data: {\n          post: post_data\n        },\n        success: function success(data) {\n          self.props.handleUpdateRecord(self.props.post, data);\n          self.setState({\n            edit: false\n          });\n          self.setState({\n            category_id: self.state.category_id\n          });\n        }\n      });\n    }\n  }, {\n    key: \"handleToggle\",\n    value: function handleToggle(e) {\n      e.preventDefault();\n      this.setState({\n        edit: !this.state.edit\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      e.preventDefault();\n      var input_name = e.target.name;\n      var value = e.target.value;\n      this.setState(_defineProperty({}, input_name, value));\n    }\n  }, {\n    key: \"recordValue\",\n    value: function recordValue(field) {\n      return document.getElementById(field).value;\n    }\n  }, {\n    key: \"handleDeleteRecord\",\n    value: function handleDeleteRecord(e) {\n      e.preventDefault();\n      console.log(\"id = \".concat(this.props.post.id));\n      var self = this;\n      $.ajax({\n        method: 'DELETE',\n        url: '/posts/' + self.props.post.id,\n        success: function success(data) {\n          self.props.handleDeleteRecord(self.props.post.id);\n        }\n      });\n    }\n  }, {\n    key: \"renderForm\",\n    value: function renderForm() {\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        name: \"name\",\n        defaultValue: this.props.post.name,\n        className: \"form-control\",\n        type: \"text\",\n        id: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        name: \"title\",\n        defaultValue: this.props.post.title,\n        className: \"form-control\",\n        type: \"text\",\n        id: \"title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        name: \"author\",\n        defaultValue: this.props.post.author,\n        className: \"form-control\",\n        type: \"text\",\n        id: \"author\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        value: this.state.category_id,\n        className: \"form-control\",\n        onChange: this.handleChange,\n        name: \"category_id\",\n        id: \"category_id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, this.props.categories.map(function (category) {\n        return React.createElement(\"option\", {\n          value: category.id,\n          key: category.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, category.name);\n      }))), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        name: \"description\",\n        defaultValue: this.props.post.description,\n        className: \"form-control\",\n        type: \"text\",\n        id: \"description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, this.props.post.published_at), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, this.props.post.last_edited_at), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"btn btn-success btn-sm\",\n        onClick: this.handleUpdate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Save\"), React.createElement(\"a\", {\n        className: \"btn btn-default btn-sm\",\n        onClick: this.handleToggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Cancel\")));\n    }\n  }, {\n    key: \"renderRecord\",\n    value: function renderRecord() {\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, this.props.post.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, this.props.post.title), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, this.props.post.author), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, this.getCategory(this.props.post.category_id)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, this.props.post.description), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, this.props.post.published_at), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, this.props.post.last_edited_at), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"btn btn-primary btn-xs\",\n        onClick: this.handleToggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Edit\"), React.createElement(\"a\", {\n        className: \"btn btn-danger btn-xs\",\n        onClick: this.handleDeleteRecord,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Delete\")));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.edit) {\n        return this.renderForm();\n      } else {\n        return this.renderRecord();\n      }\n    }\n  }]);\n\n  return Post;\n}(React.Component);\n\nexport default Post;","map":{"version":3,"sources":["/home/deepa/Documents/AptanaSpace3/rails5-reactjs-webpack-sample/app/javascript/components/Post.js"],"names":["React","Post","props","handleDeleteRecord","bind","handleToggle","handleUpdate","handleChange","getCategory","state","edit","category_id","cname","categories","map","cat","id","toString","name","e","preventDefault","post_data","recordValue","description","title","author","document","getElementById","value","self","$","ajax","method","url","post","data","success","handleUpdateRecord","setState","input_name","target","field","console","log","category","published_at","last_edited_at","renderForm","renderRecord","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nclass Post extends React.Component{\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\t\tthis.handleDeleteRecord = this.handleDeleteRecord.bind(this);\n\t\tthis.handleToggle = this.handleToggle.bind(this);\n\t\tthis.handleUpdate = this.handleUpdate.bind(this);\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.getCategory = this.getCategory.bind(this);\n\t\tthis.state = {\n\t\t\tedit: false,\n\t\t\tcategory_id: ''\n\t\t}\n\t}\n\t\n\tgetCategory(category_id)\n\t{\n\t\tlet cname = this.props.categories.map((cat) => {return cat.id.toString() === category_id.toString() ? cat.name : ''});\n\t\treturn cname;\n\t}\n\t\n\thandleUpdate(e)\n\t{\n\t\te.preventDefault();\n\t\tvar post_data = {\n        name: this.recordValue(\"name\"),\n        description: this.recordValue(\"description\"),\n        title: this.recordValue(\"title\"),\n        author: this.recordValue(\"author\"),\n        category_id: document.getElementById(\"category_id\").value\n      };\n      var self = this;\n\t\t$.ajax({\n        method: 'PUT',\n        url: '/posts/' + self.props.post.id,\n        data: { post: post_data },\n        success: function(data) {\n          self.props.handleUpdateRecord(self.props.post, data);\n          self.setState({ edit: false });\n          self.setState({ category_id: self.state.category_id });\n        }\n      })\n\t}\n\t\n\thandleToggle(e) {\n    e.preventDefault();\n    this.setState({ edit: !this.state.edit });\n    }\n    \n    handleChange(e)\n    {\n    \te.preventDefault();\n    \tvar input_name = e.target.name;\n       var value = e.target.value;\n       this.setState({ [input_name] : value });\n    }\n    \n    recordValue(field) {\n      return document.getElementById(field).value;\n  }\n\t\n\thandleDeleteRecord(e)\n\t{\n\t\te.preventDefault();\n\t\tconsole.log(`id = ${this.props.post.id}`);\n\t\tvar self = this;\n\t\t$.ajax({\n      method: 'DELETE',\n      url: '/posts/' + self.props.post.id,\n      success: function(data) {\n        self.props.handleDeleteRecord(self.props.post.id);\n      }\n});\n\t}\n\t\n\trenderForm() {\n    return(\n      <tr>\n        <td>\n          <input name=\"name\"\n                 defaultValue={this.props.post.name}\n                 className=\"form-control\"\n                 type=\"text\"\n                 id=\"name\"\n          />\n        </td>\n        <td>\n          <input name=\"title\"\n                 defaultValue={this.props.post.title}\n                 className=\"form-control\"\n                 type=\"text\"\n                 id=\"title\"\n          />\n        </td>\n        <td>\n          <input name=\"author\"\n                 defaultValue={this.props.post.author}\n                 className=\"form-control\"\n                 type=\"text\"\n                 id=\"author\"\n          />\n        </td>\n        <td>\n        <select value={this.state.category_id} className=\"form-control\" onChange={this.handleChange} name=\"category_id\" id=\"category_id\">\n\t\t {this.props.categories.map((category) =>  (\n\t\t \t<option value={category.id} key={category.name}>{category.name}</option>\n\t\t ))\n\t\t }\n\t\t \n\t\t </select>\n        </td>\n        <td>\n          <input name=\"description\"\n                 defaultValue={this.props.post.description}\n                 className=\"form-control\"\n                 type=\"text\"\n                 id=\"description\"\n          />\n        </td>\n        <td>{this.props.post.published_at}</td>\n        <td>{this.props.post.last_edited_at}</td>\n        <td>\n          <a className=\"btn btn-success btn-sm\"\n             onClick={this.handleUpdate}>\n            Save\n          </a>\n          <a className=\"btn btn-default btn-sm\"\n             onClick={this.handleToggle} >\n            Cancel\n          </a>\n        </td>\n      </tr>\n    );\n  }\n\t\n\trenderRecord(){\n    return(\n      <tr>\n        <td>{this.props.post.name}</td>\n        <td>{this.props.post.title}</td>\n        <td>{this.props.post.author}</td>\n        <td>{this.getCategory(this.props.post.category_id)}</td>\n        <td>{this.props.post.description}</td>\n        <td>{this.props.post.published_at}</td>\n        <td>{this.props.post.last_edited_at}</td>\n        <td>\n        <a className=\"btn btn-primary btn-xs\"\n             onClick={this.handleToggle} >\n             Edit\n          </a>\n        <a className=\"btn btn-danger btn-xs\"\n             onClick={this.handleDeleteRecord} >\n            Delete\n          </a>\n        </td>\n        \n      </tr>\n    )\n};\n\n  render() {\n    if (this.state.edit) {\n      return(this.renderForm());\n    } else {\n      return(this.renderRecord());\n    }\n  }\n\n}\n\nexport default Post;"]},"metadata":{},"sourceType":"module"}